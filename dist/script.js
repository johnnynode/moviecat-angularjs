!function(t){"use strict";t.module("moviecat",["ngRoute","moviecat.directives.auto-active","moviecat.movie_detail","moviecat.movie_list"]).config(["$routeProvider",function(t){t.otherwise({redirectTo:"/in_theaters"})}]).controller("SearchController",["$scope","$route","$routeParams","$location",function(t,e,o,i){t.input="",t.search=function(){return o.category?void e.updateParams({category:"search",q:t.input}):(i.path("/search"),i.search("q",t.input))}}])}(angular),function(t){"use strict";t.module("moviecat.services.http",[]).service("HttpService",["$window",function(t){this.jsonp=function(e,o,i){var a="jsonp_"+(Math.random()*Math.random()).toString().substr(2);t[a]=function(e){i(e),t.document.body.removeChild(c)};var n="";for(var r in o)n+=r+"="+o[r]+"&";n+="callback="+a,e=e+"?"+n;var c=t.document.createElement("script");c.src=e,t.document.body.appendChild(c)}}])}(angular),function(t){t.module("moviecat.directives.auto-active",[]).directive("autoActive",["$location",function(t){return{link:function(e,o,i){e.location=t,e.$watch("location.url()",function(t,e){var a=o.children().attr("href").substr(1);t.indexOf(a)!=-1&&(o.parent().children().removeClass(i.autoActive),o.addClass(i.autoActive))})}}}])}(angular),function(t){"use strict";t.module("moviecat.movie_list",["ngRoute","moviecat.services.http"]).config(["$routeProvider",function(t){t.when("/:category/:page?",{templateUrl:"movie_list/view.html?rev=@@hash",controller:"MovieListCtrl"})}]).controller("MovieListCtrl",["$scope","$route","$routeParams","HttpService",function(t,e,o,i){t.page=o.page-0||1;var a=5*(t.page-1),n=5;t.totalCount=0,t.totalPage=0,t.go=function(o){0<o&&o<=t.totalPage&&e.updateParams({page:o})},t.loading=!0,t.title="加载中...",i.jsonp("http://api.douban.com/v2/movie/"+o.category,{start:a,count:n,q:o.q},function(e){t.loading=!1,t.title=e.title,t.movies=e.subjects,t.totalCount=e.total,t.totalPage=Math.ceil(t.totalCount/n),t.$apply()})}])}(angular),function(t){"use strict";t.module("moviecat.movie_detail",["ngRoute","moviecat.services.http"]).config(["$routeProvider",function(t){t.when("/detail/:id",{templateUrl:"movie_detail/view.html?rev=@@hash",controller:"MovieDetailController"})}]).controller("MovieDetailController",["$scope","$route","$routeParams","HttpService",function(t,e,o,i){t.movie={},t.loading=!0,t.title="Loading...",i.jsonp("http://api.douban.com/v2/movie/subject/"+o.id,{},function(e){t.movie=e,t.loading=!1,t.title=e.title,t.$apply()})}])}(angular);